<?xml version="1.0" encoding="utf-8"?>

<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FuchsControls.Containers.FuchsAccordion"
             x:Name="ThisAccordion"
             AutomationProperties.Name="{Binding Title, Source={x:Reference ThisAccordion}}"
             AutomationProperties.HelpText="Click to expand or shrink view">
    <Border Padding="{DynamicResource FuchsPadding}" BackgroundColor="Transparent" VerticalOptions="Start">
        <Border.StrokeShape>
            <RoundRectangle CornerRadius="{Binding CornerRadius, Source={x:Reference ThisAccordion}}" />
        </Border.StrokeShape>
        <VerticalStackLayout Spacing="{Binding Spacing, Source={x:Reference ThisAccordion}}" VerticalOptions="Start">

            <!-- Header Section -->
            <Grid ColumnDefinitions="*, Auto" Padding="10" BackgroundColor="{Binding HeaderBackgroundColor, Source={x:Reference ThisAccordion}}">
                <Grid.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnHeaderTapped" />
                </Grid.GestureRecognizers>

                <Label Text="{Binding Title, Source={x:Reference ThisAccordion}}"
                       VerticalOptions="Center"
                       StyleClass="typo-h4"
                       TextColor="{Binding AccentColor, Source={x:Reference ThisAccordion}}" />

                <Label x:Name="ChevronLabel"
                       Grid.Column="1"
                       Text="v"
                       StyleClass="typo-caption"
                       VerticalOptions="Center" />
            </Grid>

            <!-- Content Section -->
            <ContentView x:Name="ContentContainer"
                         IsVisible="{Binding IsExpanded, Source={x:Reference ThisAccordion}}"
                         Content="{Binding AccordionContent, Source={x:Reference ThisAccordion}}" />

        </VerticalStackLayout>
    </Border>
</ContentView>